# pnpm 原理

## 概念
1. 文件的本质

在操作系统中,文件实际上是一个指针,只不过它指向的不是内存地址,而是一个外部存储地址(这里的外部存储可以是硬盘,U盘,甚至是网络)

2. 文件的拷贝

如果你复制一个文件,是将该文件指针指向的内容进行复制,然后产生一个新文件指向新的内容

3. 硬链接hard link

硬链接的概念来自于Unix操作系统,它是将一个文件A指针复制到另一个文件B指针中,文件B就是文件A的硬链接

通过硬链接,不会产生额外的磁盘占用,并且,两个文件都能找到相同的磁盘内容
硬链接的数量没有限制,可以为同一个文件产生多个硬链接
windows Vista操作系统开始,支持了创建硬链接的操作,在cmd中使用下面的命令可以创建硬链接
`mklink /h` 链接名称 目标文件

由于文件夹(目录)不存在文件内容,所以文件夹(目录)不能创建硬链接
> 由于种种原因,在windows操作系统中,通常不要跨越盘创建硬链接

4. 符号链接 Symbol link

符号链接又称为软链接,如果为某个文件或文件夹A来创建符号连接B,则B指向A

windows Vista操作系统开始,支持了创建符号链接的操作,在cmd中使用下面的命令可以创建符号链接
`mklink /d` 链接名称 目标文件
/d表示创建的是目录的符号链接,不写则是文件的符号链接

> 早期的windows系统不支持符号链接,但它提供了一个工具junction来达到类似的功能
> 
**符号链接和硬链接的区别**
1. 硬链接仅能链接文件,而符号链接可以链接目录
2. 硬链接在链接完成后仅和文件内容关联,和之前链接的文件没有任何关系,而符号是中和之前链接的文件关联,和文件内容不直接相关

5. 快捷方式

快捷方式类似于符号链接,是windows系统早期就支持的链接方式
它不仅仅是一个指向其他文件或目录的指针,其中还包含了各种信息: 如权限,兼容性启动方式等其他各种属性
由于快捷方式是windows系统独有的,在跨平台的应用中一般不会使用

6. node环境对硬链接和符号链接的处理

硬链接: 硬链接是一个实实在在的文件,node不对其做任何特殊处理,也无法区别对待,实际上,node根本无从知晓该文件是不是一个硬链接
符号链接: 由于符号链接指向的是另一个文件或目录,当node执行符号链接下的JS文件时,会使用原始路径






