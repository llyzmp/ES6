# pnpm

1. 安装和使用
全局安装pnpm
`npm install -g pnpm`
之后在使用时,只需要把npm替换为pnpm即可
如果要在执行安装在本地的CLI,可以使用pnpx,它和npx的功能完全一样,唯一不同的是,在使用pnpx执行一个需要安装的命令时,会使用pnpm进行安装

> 比如`npx mocha` 执行本地的`mocha`命令时,如果`mocha`没有安装,则npx会自动的临时的安装mocha,安装好之后,自动执行

## pnpm原理

1. 同yarn和npm一样,pnpm仍然使用缓存来保存已经安装过的包,以及使用pnpm-lock.yaml来记录详细的依赖版本
2. 不同于yarn和npm,pnpm使用符号链接和硬链接(可以把它们想象成快捷方式)的做法来放置依赖,从而规避从缓存中拷贝文件的时间,使得安装和写在的速度更快
3. 由于使用了符号链接和硬链接,pnpm可以规避windows操作系统的路径过长的问题,因此,它选择使用的依赖结果,有着几乎完美的依赖管理,也因为如此,项目中只能使用直接依赖,而不能使用间接依赖

**注意:**
由于pnpm会改动node_modules目录结构,使得每个包只能使用直接依赖,而不能使用间接依赖,因此,如果使用pnpm安装的包中包含间接依赖,则会出现问题(**现在不会了,除非使用了绝对路径**)
由于pnpm超高的安装写在效率,越来越多的包开始修正之前的间接依赖代


